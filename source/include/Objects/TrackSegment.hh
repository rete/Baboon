/*
 *
 * TrackSegment.hh header template generated by fclass
 * Creation date : Fri Mar  1 23:58:57 2013
 * Copyright (c) 2012 CNRS / IPNL
 * All Right Reserved.
 *
 * Use and copying of these libraries and preparation of derivative works
 * based upon these libraries are permitted. Any copy of these libraries
 * must include this copyright notice.
 *
 * Written by : R. Et√©
 */


#ifndef TRACKSEGMENT_HH
#define TRACKSEGMENT_HH

#include <iostream>
#include <string>
#include <cstdlib>
#include <vector>
#include <algorithm>
#include <cmath>
#include <utility>  // for pairs

// lcio includes

// sdhcal includes
#include "Objects/Hit.hh"


namespace baboon {


	typedef std::pair<Hit*,Hit*> TrackSegmentExtremities;


	enum TrackTag {
		fLinear,
		fCurved,
		fTrackUndefined
	};

	/*!
	 * Class TrackSegment. Define a track segment by a hit collection
	 */

	class TrackSegment {


	protected :
		/*! cluster collection defining the track */
		HitCollection *hitCollection;
		/*! Extremities of the track segment */
		TrackSegmentExtremities extremities;
		/*!  */
		ThreeVector trackAjustementVector;

		TrackTag trackTag;


	public :

		/*! Default Constructor */
		TrackSegment();
		/*! Constructor with hit collection */
//		TrackSegment( HitCollection* col);
		/*! Default Destructor */
		virtual ~TrackSegment();
		/* return the hit collection which define the track segment */
		inline HitCollection *GetHitCollection() { return hitCollection; }
		/*! return the track angle */
		double GetThetaAngle();

		TrackSegmentExtremities GetExtremities();

		double GetTrackLength();

		void SetTrackAjustementVector( const ThreeVector& trackVec)
			{ trackAjustementVector = trackVec; }

		std::vector<ThreeVector> GetPositions() const;

		inline void SetTrackTag( TrackTag tag )
			{ trackTag = tag; }

		inline TrackTag GetTrackTag() const
			{ return trackTag; }

		void AddHit( Hit *hit );

		void RemoveHit( Hit *hit );

		inline unsigned int Size()
			{ return hitCollection->size(); }

	};

	typedef std::vector<TrackSegment*> TrackSegmentCollection;

}  //  end namespace sdhcal

#endif  // TRACKSEGMENT_HH
