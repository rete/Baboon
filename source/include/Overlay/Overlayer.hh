/*
 *
 * Overlayer.hh header template generated by fclass
 * Creation date : Wed Mar 13 14:23:21 2013
 * Copyright (c) CNRS / IPNL
 * All Right Reserved.
 *
 * Use and copying of these libraries and preparation of derivative works
 * based upon these libraries are permitted. Any copy of these libraries
 * must include this copyright notice.
 *
 * Written by : R. Et√©
 */


#ifndef OVERLAYER_HH
#define OVERLAYER_HH

#include <iostream>
#include <string>
#include <cstdlib>
#include <cmath>


// lcio includes
#include "IMPL/CalorimeterHitImpl.h"
#include "IMPL/LCCollectionVec.h"
#include "UTIL/CellIDDecoder.h"
#include "UTIL/CellIDEncoder.h"

// sdhcal includes
#include "Geometry/ThreeVector.hh"
#include "Config/SdhcalConfig.hh"
#include "Objects/Hit.hh"


namespace baboon {

	/*!
	 * Class Overlayer.
	 */

	class Overlayer {

		protected :

			std::vector<int> nbOfPadsXYZ;
			int lostHits;
			HitCollection* collection1;
			HitCollection* collection2;
			HitCollection* overlaidCollection;
			ThreeVector *collectionTranslation1;
			ThreeVector *collectionTranslation2;
			std::vector<double> padsSize;
			std::vector<double> interpadSize;
			double layerThickness;
			bool collectionsTranslated;


			void TranslateCollections();

		public :
			/*! Default Constructor with two collections */
			Overlayer( HitCollection *col1 , HitCollection *col2) ;
			/*! Default Destructor */
			virtual ~Overlayer() ;
			/*! Overlay the two collection */
			void OverlayCollections();

			inline HitCollection* GetOverlaidCollection()
				{ return overlaidCollection; }

			inline void SetTranslations(ThreeVector* trans1 , ThreeVector* trans2) {
				collectionTranslation1 = trans1;
				collectionTranslation2 = trans2;
			}

			inline int GetNumberOfLostHits()
				{ return lostHits; }

			int ThresholdToInt( HitThreshold fThr );



	};

}

#endif  // OVERLAYER_HH
