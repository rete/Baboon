  /// \file EventNavigator.cc
/*
 *
 * EventNavigator.cc source template generated by fclass
 * Creation date : lun. mai 6 2013
 * Copyright (c) CNRS , IPNL
 *
 * All Right Reserved.
 * Use and copying of these libraries and preparation of derivative works
 * based upon these libraries are permitted. Any copy of these libraries
 * must include this copyright notice.
 * 
 * @author : rete
 */


#include "Gui/EventNavigator.hh"

using namespace std;

namespace baboon {

	EventNavigator::EventNavigator( TGMainFrame* prt ) {

		parent = prt;
		eventFrame = new TGGroupFrame(parent, "Event Navigation", kHorizontalFrame);
		horizontalFrame = new TGHorizontalFrame(parent);

		eventFrame->AddFrame(horizontalFrame);

		TString icondir( Form("%s/icons/", gSystem->Getenv("ROOTSYS")) );

		goBackButton = new TGPictureButton(horizontalFrame,gClient->GetPicture(icondir + "GoBack.gif"));
		horizontalFrame->AddFrame(goBackButton);
//		goBackButton->Connect("Clicked()", "EventNavigator", fh, "PreviousEvent()");

		goForwardButton = new TGPictureButton(horizontalFrame,gClient->GetPicture(icondir + "GoForward.gif"));
		horizontalFrame->AddFrame(goForwardButton);
//		goForwardButton->Connect("Clicked()", "EventNavigator", fh, "NextEvent()");

		TGHorizontalFrame *eventFrame2 = new TGHorizontalFrame(eventFrame);

	    goToEventLabel = new TGLabel(eventFrame2, " Go to \n event" );

	    browseLcioButton = new TGPictureButton(eventFrame2,gClient->GetPicture(icondir + "fileopen.xpm"));
	    browseLcioButton->Connect("Clicked()", "baboon::EventNavigator", this, "PopUpSlcioBrowser()");

	    eventLoader = new EventLoader();

		entryNumberWidget = new TGNumberEntry( eventFrame2 , 0 , 5.0, -1,
		                						TGNumberFormat::kNESInteger,
		                						TGNumberFormat::kNEAAnyNumber,
		                						TGNumberFormat::kNELLimitMinMax,
		                						0, 100000);

		eventFrame2->AddFrame(goToEventLabel);
		eventFrame2->AddFrame(entryNumberWidget);
		eventFrame2->AddFrame(browseLcioButton);

//		entryNumberWidget->Connect("ValueSet(Long_t)", "EventNavigator", 0, "GotoEvent()");

	    eventFrame->AddFrame(eventFrame2);
	    parent->AddFrame(eventFrame);
	}

	EventNavigator::~EventNavigator() {;}

	void EventNavigator::PopUpSlcioBrowser() {

	    TGFileInfo fileInfo;
		const char *filetypes[] = {"LCIO files","*.slcio",0,0};
		fileInfo.fFileTypes = filetypes;
		fileInfo.fIniDir = StrDup(TString("."));

		new TGFileDialog(gClient->GetRoot(), parent, kFDOpen, &fileInfo);   //  deleted by root when closing

		cout << "Selected LCIO file name : " << fileInfo.fFilename << endl;
		eventLoader->LoadLCIOFile( string(fileInfo.fFilename) );
	}

	void EventNavigator::ProcessEvent() {

	}

}  // namespace 

